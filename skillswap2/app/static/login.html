<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Login - SkillSwap</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
background:linear-gradient(135deg,#667eea,#764ba2);
min-height:100vh;
display:flex;
align-items:center;
justify-content:center;
}
.card{
border-radius:15px;
box-shadow:0 10px 30px rgba(0,0,0,.3);
}
</style>
</head>

<body>

<div class="card p-4 col-md-4">
<h3 class="text-center mb-3">ðŸš€ SkillSwap Login</h3>

<form id="loginForm">
<input class="form-control mb-3" type="email" id="email" placeholder="Email" required>
<input class="form-control mb-3" type="password" id="password" placeholder="Password" required>

<button type="submit" class="btn btn-primary w-100">Login</button>
</form>

<div class="text-center mt-3">
    <p>Don't have an account? <a href="/register" style="color:#667eea">Register here</a></p>
</div>
</div>

<script>
document.querySelector("form").addEventListener("submit", async e => {
    e.preventDefault()

    const formData = new FormData()
    formData.append("email", email.value)
    formData.append("password", password.value)

    const res = await fetch("http://localhost:8000/auth/login", {
        method: "POST",
        body: formData
    })

    const data = await res.json()

    if(!res.ok){
        alert(data.detail)
        return
    }

    // âœ… ROLE BASED REDIRECT
    if(data.role === "mentor"){
        window.location.href = "/add-skill"
    } else {
        window.location.href = "/search"
    }
})
</script>



</body>
</html>